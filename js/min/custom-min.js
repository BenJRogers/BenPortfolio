!function($){"use strict";function e(e){e.find(".chart").easyPieChart({scaleColor:!1,barColor:"#D0482B",lineWidth:10,trackColor:"#4a504f",lineCap:"butt",animate:1e3,size:70,onStep:function(e,t,i){$(this.el).find("span").text(Math.round(i)+"%")}});var t=$(window).height(),i=e.find(".chart-container"),n=t-i.height()+100;i.waypoint(function(){i.find("li").each(function(){var e=$(this).attr("data-percent");TweenMax.to($(this).children(".bar"),2,{height:e})})},{context:e.find(".inner-wrapper"),offset:n,triggerOnce:!0})}function t(e){var t=$("#folio");t.isotope({itemSelector:".item",transformsEnabled:!0,duration:750,resizable:!0,resizesContainer:!0,layoutMode:"masonry"});var i=$(".folio-filter");i.find("a").click(function(){i.find(".active").removeClass("active"),$(this).parent().addClass("active");var e=$(this).attr("data-filter");e="*"==e?e:"."+e,t.isotope({filter:e});var n=$(this).parent();if(!n.find(".bg").length){folioBg=i.find(".bg");var o=folioBg.clone();TweenMax.to(folioBg,.5,{scaleX:0,scaleY:0,opacity:0,onComplete:function(){folioBg.remove()}}),o.appendTo(n),TweenMax.from(o,.5,{scaleX:0,scaleY:0,opacity:0})}return!1}),t.find(".item").on("click",function(){var e=$("#folio-popup"),t=$(this).find(".extra-information");e.html('<button title="Close (Esc)" type="button" class="mfp-close">Ã—</button>'),t.length>0?(e.append(t.clone()),e.addClass("with-content")):(e.removeClass("with-content"),e.append($(this).find("img").clone()))}),t.magnificPopup({delegate:"a",type:"inline",removalDelay:300,mainClass:"my-mfp-slide-bottom"}),$(".popup-youtube, .popup-vimeo").magnificPopup({disableOn:700,type:"iframe",mainClass:"my-mfp-slide-bottom",removalDelay:160,preloader:!1,fixedContentPos:!1})}function i(){var e=$("section#contact");e.hasClass("activated")||(e.addClass("activated"),$("#google-map").gmap3({map:{options:{maxZoom:13,streetViewControl:!1,mapTypeControl:!1}},styledmaptype:{id:"mystyle",options:{name:"Style 1"},styles:[{featureType:"all",stylers:[{saturation:-100},{gamma:.9}]}]},overlay:{address:"Sydney Australia",options:{content:'<div id="map-marker"><i class="icon-map-marker"></i></div>',offset:{y:-65,x:-20}}}},"autofit"),$("#google-map").gmap3("get").setMapTypeId("mystyle"),n()),$(".inner-wrapper").scroll(function(){var e=$(this),t=e.scrollTop();TweenMax.to($("#google-map"),0,{top:-550-t})})}function n(){var e=$("form#contact-form");e.submit(function(t){if(t.preventDefault(),$("#alert-wrapper").length)return!1;var i=$('<div id="alert-wrapper"><button type="button" class="close" data-dismiss="alert">X</div>').appendTo(e);$("form#contact-form .alert").remove();var n=!1,o=!1;e.find(".requiredField").each(function(){if(""==$.trim($(this).val())){var e=$(this).attr("placeholder");i.append('<div class="alert">You forgot to enter your '+e+".</div>"),n=!0}else if($(this).hasClass("email")){var t=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;if(!t.test($.trim($(this).val()))){var e=$(this).attr("placeholder");i.append('<div class="alert"> You\'ve entered an invalid '+e+".</div>"),n=!0}}});var a=new TimelineLite({paused:!0}),r=new TimelineLite({paused:!0});if(a.to(i,.3,{opacity:1,top:"30%"}),r.to(i,.3,{opacity:0,top:"60%",onComplete:function(){i.remove()}}),n)a.play(),i.find("button").on("click",function(){r.play()});else{var s=$(this).serialize();$.ajax({type:"POST",url:$(this).attr("action"),dataType:"json",data:s,success:function(t){"error"==t.status?(o=!0,e.append('<div class="alert"><strong>Sorry</strong> There was an error sending your message!</div>')):"ok"==t.status&&e.slideUp(300,function(){$(this).before('<div class="alert"><strong>Thanks</strong> Your email has been delivered. </div>')})},error:function(){o=!0,$("form#contact-form").append('<div class="alert"><strong>Sorry</strong> There was an error sending your message!</div>')}})}return o&&(a.play(),i.find("button").on("click",function(){r.play()})),!1})}function o(e){var t=e.currentPage.find(".inner-wrapper");t.scrollTop(0),t.perfectScrollbar("destroy"),$(".inner-wrapper").stellar();var i=e.demandPage.find(".inner-wrapper"),n={};i.css("height",e.config.height-e.config.navHeight),i.perfectScrollbar({wheelSpeed:50,suppressScrollX:!0}),i.css("height",e.config.height);var o=i.find(".ps-scrollbar-y-rail");e.toTop||o.addClass("stick-top"),0==o.find(".ps-scrollbar-y").height()&&o.css("display","none"),o.css("right","-15px"),TweenMax.to(o,.5,{right:"0px"})}function a(e){var t=$("section#home"),i=$("#home-contents"),n=i.height(),o=e.config.height-e.config.navHeight,a=o-n,r=t.find(".ps-scrollbar-y-rail");a>20?i.css("margin-top",a/2):i.css("margin-top",20),o>n+a/2&&t.addClass("no-scroll")}function r(e){function t(){var e=1,t=0;$("#caption-carousel").carouFredSel({width:300,height:80,circular:!0,infinite:!0,direction:"up",items:{visible:1},onCreate:function(e){e.items.show()},scroll:{duration:1200,pauseOnHover:!1,fx:"fade",onBefore:function(o){o.items.visible.addClass("visible-caption"),e=(t+1)%n,TweenMax.to(i.children().eq(t),2.5,{autoAlpha:0}),TweenMax.to(i.children().eq(e),2,{autoAlpha:1})},onAfter:function(e){e.items.old.removeClass("visible-caption"),t=(t+1)%n}}})}var i=$("#bg-slider");if("stop"==e)$("#caption-carousel").trigger("stop");else if("start"==e)$("#caption-carousel").trigger("play",!0);else if("init"==e){var n=i.find("div").length;i.find("div").each(function(){var e=$(this).find("img").attr("src");$(this).css({background:"url("+e+")"})}),t()}}function s(){function e(){c||(c=!0,(new TimelineLite).to(t,1.5,{height:0,ease:Power4.easeInOut}).to($("#text-load"),1.5,{opacity:0,ease:Power4.easeInOut,onComplete:function(){$("#text-load").remove()}},"-=1.5").to($("#nav-container"),1.5,{top:0,ease:Power4.easeInOut,onStart:function(){r("init")}},"-=1.5").from($("#profile"),1.5,{top:"-30px",opacity:0,ease:Power4.easeInOut},"-=1.2").from($("#home-socials"),1.5,{bottom:"-10px",opacity:0,ease:Power4.easeInOut},"-=1.2").from($(".arrow-down"),1.5,{scaleX:2,scaleY:2,top:"-50px",opacity:0,ease:Power4.easeInOut},"-=0.7"))}var t=$("#preloader"),i=t.find("#load-overlay"),n=$("img"),o=n.length,a=0,s,c=!1;n.one("load",function(){function t(){a+=1;var t=100*(1-a/o)+"%";TweenMax.to(i,.1,{width:t}),a==o&&e()}t()}).each(function(){(this.complete||$(this).height()>0)&&$(this).load()}),$(window).load(function(){TweenMax.to(i,2,{width:0,onComplete:function(){e()}})})}function c(){l&&(l=0,$(window).trigger("resized")),setTimeout(function(){c()},200)}s();var d={wrapper:$("#body-wrapper"),navContainer:$("#nav-container"),navLi:$("ul#nav li"),config:{height:$(window).height(),responsiveWidth:600,windowWidth:$(window).width()},init:function(){this.sections=this.wrapper.children("section"),this.currentPage=this.sections.filter(".active"),this.config.navHeight=this.navContainer.height(),this.currentPage.css("z-index",101).show(),this.prepare(),this.bindUiAction(),this.demandPage=this.currentPage,this.demandPage.find(".contain").css("padding-top",this.config.navHeight),this.toTop=!0,o(this),this.toTop=!1,a(this);var e=this,t,i,n,r;this.navLi.on("mouseover",function(){r=e.toTop?{top:"-16px"}:{top:"0px"};var t=$(this).find("span.top"),i=$(this).find("span.bottom");n=new TimelineLite({}),n.to(t,.4,r).to(i,.4,r,"-=0.4")}),this.navLi.on("mouseleave",function(){r=e.toTop?{top:"0px"}:{top:"-16px"};var t=$(this).find("span.top"),i=$(this).find("span.bottom");n=new TimelineLite({}),n.to(t,.4,r).to(i,.4,r,"-=0.4")}),this.navLi.on("click",function(){d.navigate($(this).attr("data-page"))})},navigate:function(e){return d.demandPage=d.sections.filter(e),d.demandPage.attr("id")==d.currentPage.attr("id")?!1:(d.navLi.removeClass("active"),d.navLi.filter('[data-page="'+e+'"]').addClass("active"),d.setup(),void d.showDemand())},showDemand:function(){"portfolio"==this.demandPage.attr("id")&&t(d.demandPage),"home"==this.currentPage.attr("id")&&r("stop");var e=this,i=e.config.height-e.config.navHeight,n=e.config.height,o=new TimelineLite({onComplete:e.done}),a={},s={},c={},l=e.currentPage.find(".ps-scrollbar-y-rail");e.toTop?(a={height:0,ease:Power4.easeInOut},s={top:0,ease:Power4.easeInOut}):(a={height:n,ease:Power4.easeInOut},s={top:i,ease:Power4.easeInOut}),e.navContainer.removeClass("onpage"),o.to(e.navContainer,1.5,s).to(l,.01,{right:"-15px"},"-=1.5"),e.toTop?o.to(e.currentPage,1.5,a,"-=1.5"):o.to(e.demandPage,1.5,a,"-=1.5")},setup:function(){var e=d,t=e.config.height,i=e.config.navHeight;e.toTop?(e.demandPage.css({"z-index":99,display:"block",height:t}),e.demandPage.find(".contain").css("padding-top",i)):(e.currentPage.css("z-index",99),e.demandPage.css({"z-index":101,display:"block",height:0}),e.demandPage.find(".contain").css("padding-bottom",i))},done:function(){o(d);var t=d.demandPage.attr("id");"skills"==t?e(d.demandPage):"contact"==t?i():"home"==t&&r("start"),d.navContainer.toggleClass("bottom"),d.toTop?d.navContainer.find("span").css("top","-16px"):d.navContainer.find("span").css("top","0px"),d.toTop=!d.toTop,d.currentPage.removeClass("active").css({"z-index":1}).hide(),d.currentPage.find(".contain").css({"padding-bottom":0,"padding-top":0}),d.currentPage=d.demandPage,d.currentPage.addClass("active").css("z-index",101),d.selectnav.children().removeAttr("selected");var n=d.currentPage.attr("id");n="#"+n,d.selectnav.val(n)},prepare:function(){var e=this;e.config.height=$(window).height(),e.config.windowWidth=$(window).width(),e.config.desktopFlag=e.config.windowWidth<e.config.responsiveWidth?!1:!0,e.sections.css("height",e.config.height),e.wrapper.css("height",e.config.height),e.sections.children(".inner-wrapper").css("height",e.config.height);var t=e.config.height-e.config.navHeight,i={};e.dropdown(),i=e.toTop?{top:t}:{top:0},e.navContainer.css(i);var n=e.currentPage.find(".inner-wrapper");n.perfectScrollbar("destroy"),n.css("height",e.config.height-e.config.navHeight),n.perfectScrollbar({wheelSpeed:50,suppressScrollX:!0}),n.css("height",d.config.height);var o=n.find(".ps-scrollbar-y-rail");0==o.find(".ps-scrollbar-y").height()&&o.css("display","none"),e.toTop&&o.addClass("stick-top")},bindUiAction:function(){var e=this;$(window).on("resized",function(){e.prepare()})},dropdown:function(){var e=this;if($("#dropdown-nav").length>0)return!1;var t=$('<select id="dropdown-nav"></select>').appendTo(this.navContainer);e.selectnav=t,this.navLi.each(function(){t.append('<option value="'+$(this).attr("data-page")+'">'+$(this).find("span.top").text()+"</option>")}),t.on("change",function(){d.navigate(this.value)})}};d.init(),$(".custom-navigate").on("click",function(){d.navigate($(this).attr("data-destination"))}),$(":input[placeholder]").placeholder(),$(window).on("resize",function(){});var l=0;$(window).resize(function(){l=1}),c()}(jQuery);